p8105\_hw5\_lg3158
================
Ling
11/12/2021

## Problem 1

``` r
q1_df = 
  read_csv(url("https://github.com/washingtonpost/data-homicides/raw/master/homicide-data.csv")) %>%
  mutate(city_state = paste(city, state, sep = ","))
```

    ## Rows: 52179 Columns: 12

    ## -- Column specification --------------------------------------------------------
    ## Delimiter: ","
    ## chr (9): uid, victim_last, victim_first, victim_race, victim_age, victim_sex...
    ## dbl (3): reported_date, lat, lon

    ## 
    ## i Use `spec()` to retrieve the full column specification for this data.
    ## i Specify the column types or set `show_col_types = FALSE` to quiet this message.

-   The data have 52179 observations and 13 variables (city,
    city\_state, disposition, lat, lon, reported\_date, state, uid,
    victim\_age, victim\_first, victim\_last, victim\_race, victim\_sex)
    after create the `city_state` variable.
-   Summarize total homicide and unsolved homicide
    -   create a data summarize total homicide number by city
    -   create a data only including the unsolved homicide, and
        summarize the total number by city
    -   combine the 2 data by city

``` r
q1_tot = q1_df %>%
  group_by(city_state) %>%
  summarise(total_homicide = n())

q1_unsolved = q1_df %>%
  filter(disposition %in% c("Closed without arrest","Open/no arrest")) %>%
  group_by(city_state) %>%
  summarise(unsolved_homicide = n())

q1_summary = left_join(q1_tot, q1_unsolved, by = "city_state")

knitr::kable(q1_summary)
```

| city\_state       | total\_homicide | unsolved\_homicide |
|:------------------|----------------:|-------------------:|
| Albuquerque,NM    |             378 |                 52 |
| Atlanta,GA        |             973 |                 58 |
| Baltimore,MD      |            2827 |                152 |
| Baton Rouge,LA    |             424 |                 16 |
| Birmingham,AL     |             800 |                 64 |
| Boston,MA         |             614 |                 NA |
| Buffalo,NY        |             521 |                  8 |
| Charlotte,NC      |             687 |                 44 |
| Chicago,IL        |            5535 |                387 |
| Cincinnati,OH     |             694 |                 49 |
| Columbus,OH       |            1084 |                 80 |
| Dallas,TX         |            1567 |                 78 |
| Denver,CO         |             312 |                 46 |
| Detroit,MI        |            2519 |                 16 |
| Durham,NC         |             276 |                 11 |
| Fort Worth,TX     |             549 |                 35 |
| Fresno,CA         |             487 |                 23 |
| Houston,TX        |            2942 |                346 |
| Indianapolis,IN   |            1322 |                102 |
| Jacksonville,FL   |            1168 |                141 |
| Kansas City,MO    |            1190 |                 36 |
| Las Vegas,NV      |            1381 |                175 |
| Long Beach,CA     |             378 |                 27 |
| Los Angeles,CA    |            2257 |                 NA |
| Louisville,KY     |             576 |                 NA |
| Memphis,TN        |            1514 |                 50 |
| Miami,FL          |             744 |                 63 |
| Milwaukee,wI      |            1115 |                 37 |
| Minneapolis,MN    |             366 |                 31 |
| Nashville,TN      |             767 |                 57 |
| New Orleans,LA    |            1434 |                 98 |
| New York,NY       |             627 |                 17 |
| Oakland,CA        |             947 |                 NA |
| Oklahoma City,OK  |             672 |                 11 |
| Omaha,NE          |             409 |                 10 |
| Philadelphia,PA   |            3037 |                 92 |
| Phoenix,AZ        |             914 |                 96 |
| Pittsburgh,PA     |             631 |                 NA |
| Richmond,VA       |             429 |                 20 |
| Sacramento,CA     |             376 |                 23 |
| San Antonio,TX    |             833 |                 87 |
| San Bernardino,CA |             275 |                 19 |
| San Diego,CA      |             461 |                 64 |
| San Francisco,CA  |             663 |                  1 |
| Savannah,GA       |             246 |                 12 |
| St.Â Louis,MO      |            1677 |                 40 |
| Stockton,CA       |             444 |                 11 |
| Tampa,FL          |             208 |                  8 |
| Tulsa,AL          |               1 |                 NA |
| Tulsa,OK          |             583 |                 55 |
| Washington,DC     |            1345 |                 74 |

-   `prop.test`
    -   Baltimore result

``` r
q1_balt =
  prop.test(pull(subset(q1_summary, city_state == "Baltimore,MD"),unsolved_homicide), 
            pull(subset(q1_summary, city_state == "Baltimore,MD"),total_homicide)) %>%
  broom::tidy() %>%
  mutate(city_state = "Baltimore,MD") %>%
  select(city_state, estimate, conf.low, conf.high)
knitr::kable(q1_balt)
```

| city\_state  |  estimate | conf.low | conf.high |
|:-------------|----------:|---------:|----------:|
| Baltimore,MD | 0.0537672 | 0.045878 | 0.0628933 |

-   all other cities result
